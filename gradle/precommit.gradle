tasks.register('copyPreCommitHook', Copy) {
    from new File(rootProject.rootDir, 'scripts/pre-commit')
    into new File(rootProject.rootDir, '.git/hooks')
}

tasks.register('fixPreCommitHookPermissions', Exec) {
    dependsOn copyPreCommitHook
    commandLine 'chmod', '755', "${rootProject.rootDir}/.git/hooks/pre-commit"
}

tasks.named('build') {
    dependsOn fixPreCommitHookPermissions
}